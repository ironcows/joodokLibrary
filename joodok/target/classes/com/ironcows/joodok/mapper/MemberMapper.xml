<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
          "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="com.ironcows.joodok.mapper.MemberMapper">



	<!-- 사서가 사용할 대출을 위한 회원 조회 -->
	<select id="searchMember" parameterType="String" resultType="map">
		SELECT v.memberNo
		      ,v.id
		      ,v.name
		      ,v.dueDate
		  FROM v_member_possibleBorrowDay v
		 WHERE v.id = #{value}
	</select>
	
	<!-- 회원 개인의 정보 보기 -->
	<select id="getMyInfo" parameterType="Member" resultType="map">
		SELECT v.memberNo
		      ,v.id
		      ,v.password
		      ,v.name
		      ,v.position
		      ,v.possibleBorrowDay
		      ,v.contactNumber
		      ,v.email
		  FROM v_member_info v
		 WHERE v.memberNo = #{memberNo}
	</select>



	<!-- 회원 1명 선택 -->
	<select id="getOneMember" parameterType="Member" resultType="Member">
		SELECT m.memberNo
			  ,m.gradeNo
			  ,m.registeredDate
			  ,m.modifiedDate
			  ,m.id
			  ,m.password
			  ,m.name
			  ,m.contactNumber
			  ,m.email
		  FROM member m
		 WHERE m.memberNo = #{memberNo}
	</select>
	
	<!-- 회원 1명 수정 -->
	<update id="updateMember" parameterType="Member">
		UPDATE member m
		<set>
			<if test="password != null">
				m.password = #{password},
			</if>
			<if test="contactNumber != null">
				m.contactNumber = #{contactNumber},
			</if>
			<if test="email != null">
				m.email = #{email},
			</if>
				m.modifiedDate = sysdate
		</set>
		 WHERE m.memberNo = #{memberNo}
		<trim prefix="SET" suffixOverrides=","/>
	</update>


</mapper>